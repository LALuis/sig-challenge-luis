<!-- If we are loading the data -->
<ng-container *ngIf="loading">
    <p>Loading...</p>
</ng-container>

<!-- If we got the product list from the backend -->
<ng-container [formGroup]="form" *ngIf="!loading && !error">
    <label for="category">Filter by category</label>
    <select formControlName="category" name="category" (change)="getProducts()" >
        <option [ngValue]="null">Select a category</option>
        <option [ngValue]="category" *ngFor="let category of productService.categories | async">{{category}}</option>
    </select>
    <ng-container *ngFor="let product of productList">
        <p (click)="goToProductDetail(product.id)">
            {{  product.name }} - {{ product.price | currency: 'USD' }} - <app-category>{{ product.category }}</app-category>
        </p>
    </ng-container>
</ng-container>

<!-- If we got an error-->
<ng-container *ngIf="!loading && error">
    <p>{{ error }}</p>
</ng-container>